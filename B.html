<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Äiá»u khiá»ƒn tÆ°á»›i cÃ¢y ESP8266</title>

<!-- Firebase SDK v8 -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<style>
  body {
    font-family: Arial;
    background: #eef2f3;
    text-align: center;
  }
  .box {
    background: white;
    width: 360px;
    margin: auto;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px #aaa;
  }
  button {
    width: 120px;
    height: 40px;
    font-size: 16px;
    margin: 5px;
  }
</style>
</head>

<body>

<h2>ğŸŒ± Há»† THá»NG TÆ¯á»šI CÃ‚Y ESP8266</h2>

<div class="box">

  <h3>ğŸ“Š Dá»® LIá»†U Cáº¢M BIáº¾N</h3>
  <p>Äá»™ áº©m Ä‘áº¥t (ADC): <b id="soil">--</b></p>
  <p>Nhiá»‡t Ä‘á»™: <b id="temp">--</b> Â°C</p>
  <p>Äá»™ áº©m KK: <b id="hum">--</b> %</p>

  <hr>

  <h3>ğŸš¿ BÆ M NÆ¯á»šC (AUTO)</h3>
  <p>Tráº¡ng thÃ¡i bÆ¡m: <b id="pump">--</b></p>

  <hr>

  <h3>ğŸ’¡ ÄÃˆN (ÄIá»€U KHIá»‚N Tá»ª WEB)</h3>
  <p>Tráº¡ng thÃ¡i Ä‘Ã¨n: <b id="light">--</b></p>
  <button onclick="setLight(1)">Báº¬T ÄÃˆN</button>
  <button onclick="setLight(0)">Táº®T ÄÃˆN</button>

</div>

<script>
  // ===== Cáº¤U HÃŒNH FIREBASE =====
  var firebaseConfig = {
    databaseURL: "https://iot-9d354-default-rtdb.asia-southeast1.firebasedatabase.app"
  };

  firebase.initializeApp(firebaseConfig);
  var db = firebase.database();

  // ===== Gá»¬I Lá»†NH Báº¬T / Táº®T ÄÃˆN =====
  function setLight(state) {
    db.ref("Sensor/light").set(state);
  }

  // ===== Äá»ŒC Dá»® LIá»†U REALTIME =====
  db.ref("Sensor").on("value", function(snapshot) {
    var data = snapshot.val();
    if (!data) return;

    document.getElementById("soil").innerHTML = data.soil;
    document.getElementById("temp").innerHTML = data.temperature;
    document.getElementById("hum").innerHTML  = data.humidity;

    document.getElementById("pump").innerHTML =
      data.pump ? "ÄANG Báº¬T" : "ÄANG Táº®T";

    document.getElementById("light").innerHTML =
      data.light ? "ÄANG Báº¬T" : "ÄANG Táº®T";
  });
</script>

</body>
</html>
